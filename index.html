<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–∞–≥–∏—á–µ—Å–∫–∞—è –í—Ä–∞—â–∞—é—â–∞—è—Å—è –¢—ã–∫–≤–∞ (–ë–æ–ª—å—à–∞—è) —Å –ú—É–∑—ã–∫–æ–π</title>
    
    <style>
        /* --- –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –∏ —Ñ–æ–Ω --- */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #282c34;
            flex-direction: column;
            font-family: Arial, sans-serif;
            overflow: hidden; 
        }

        /* --- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è  --- */
        .pumpkin-wrapper {
            position: relative;
            cursor: pointer;
            display: flex; 
            justify-content: center;
            align-items: center;
        }

        /* --- –ú–∞–≥–∏—á–µ—Å–∫–æ–µ –û–±–ª–∞–∫–æ (–í—Ä–∞—â–∞—é—â–∏–π—Å—è –≠–ª–µ–º–µ–Ω—Ç) --- */
        .magic-cloud {
            width: 280px; /* –£–≤–µ–ª–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä */
            height: 280px; /* –£–≤–µ–ª–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä */
            background: linear-gradient(45deg, #a8c0ff, #3f2b96); 
            border-radius: 50%;
            box-shadow: 0 0 50px rgba(170, 200, 255, 0.9), inset 0 0 20px rgba(255, 255, 255, 0.6); 
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
            transition: transform 3s ease-out; 
            border: 5px solid rgba(255, 255, 255, 0.9); /* –£—Ç–æ–ª—â–µ–Ω–∞ —Ä–∞–º–∫–∞ */
        }

        /* --- –¢—ã–∫–≤–∞ –≤–Ω—É—Ç—Ä–∏ –û–±–ª–∞–∫–∞ (–£–≤–µ–ª–∏—á–µ–Ω–∞) --- */
        .pumpkin-emoji {
            font-size: 150px; /* –£–≤–µ–ª–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä —ç–º–æ–¥–∑–∏ */
            z-index: 15; 
            position: relative;
            animation: pulse 1s infinite alternate; 
        }

        /* --- –ê–Ω–∏–º–∞—Ü–∏–∏ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) --- */
        @keyframes spin-cloud {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .magic-cloud.rotating {
            animation: spin-cloud 0.5s linear infinite; 
        }

        /* --- –û–±–ª–∞–∫–æ —Å –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º (–£–≤–µ–ª–∏—á–µ–Ω–æ) --- */
        .number-result-cloud {
            position: absolute;
            top: -100px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞–¥ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º –æ–±–ª–∞–∫–æ–º */
            left: 50%;
            transform: translateX(-50%);
            background-color: #fff;
            color: #333;
            padding: 15px 25px; /* –£–≤–µ–ª–∏—á–µ–Ω padding */
            border-radius: 30px; /* –£–≤–µ–ª–∏—á–µ–Ω radius */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            opacity: 0; 
            transition: opacity 0.5s, top 0.5s; 
            font-weight: bold;
            font-size: 2.5em; /* –£–≤–µ–ª–∏—á–µ–Ω —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
            z-index: 30; 
            border: 3px solid #ff7518;
            white-space: nowrap;
        }

        /* –ö–ª–∞—Å—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±–ª–∞–∫–∞ —Å —á–∏—Å–ª–æ–º */
        .number-result-cloud.show {
            opacity: 1;
            top: -140px; /* –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ */
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç */
        .info-text {
            color: white;
            margin-top: 30px;
            font-size: 1.1em;
            text-align: center;
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Å–±—Ä–æ—Å–µ */
        .reset-message {
            color: #ffcc00; /* –ñ–µ–ª—Ç—ã–π —Ü–≤–µ—Ç */
            font-weight: bold;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <div class="pumpkin-wrapper" onclick="spinMagicCloud()">
        <div id="numberResultCloud" class="number-result-cloud">?</div>
        <div id="magicPumpkinCloud" class="magic-cloud">
            <span class="pumpkin-emoji">üéÉ</span>
        </div>
    </div>

    <audio id="spinSound" src="spin.mp3" preload="auto"></audio>

    <p class="info-text">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç—ã–∫–≤—É ‚Äî –ø–æ–ª—É—á–∏—à—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</p>
    <p id="resetMessage" class="info-text reset-message" style="display:none;"></p>

    <script>
        let isSpinning = false;
        // 1. –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —á–∏—Å–µ–ª (–æ—Ç 2 –¥–æ 11)
        let availableNumbers = [3, 5, 7];

        // 2. –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ (–∞–ª–≥–æ—Ä–∏—Ç–º –§–∏—à–µ—Ä–∞-–ô–µ–π—Ç—Å–∞)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        shuffleArray(availableNumbers);

        function spinMagicCloud() {
            const magicCloud = document.getElementById('magicPumpkinCloud');
            const resultCloud = document.getElementById('numberResultCloud');
            const resetMessage = document.getElementById('resetMessage');
            const audio = document.getElementById('spinSound'); // <-- –ü–æ–ª—É—á–∞–µ–º –∞—É–¥–∏–æ—ç–ª–µ–º–µ–Ω—Ç
            
            if (isSpinning) {
                return; 
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞: –ï—Å–ª–∏ —á–∏—Å–ª–∞ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
            if (availableNumbers.length === 0) {
                resetMessage.textContent = "–í–æ—Ç –∏ –≤—Å—ë üëª ";
                resetMessage.style.display = 'block';

                // –°–±—Ä–æ—Å –∏ –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
                availableNumbers = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11];
                shuffleArray(availableNumbers);
                
                // –ö—Ä–∞—Ç–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ
                setTimeout(() => {
                    resetMessage.style.display = 'none';
                    isSpinning = false; 
                }, 4000);
                
                return; 
            }

            isSpinning = true;
            resetMessage.style.display = 'none';

            // 1. –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            resultCloud.classList.remove('show');
            resultCloud.textContent = '?';

            // 2. –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ –∏ –º—É–∑—ã–∫—É
            magicCloud.classList.add('rotating');
            const randomTurns = Math.floor(Math.random() * 4); 
            magicCloud.style.transform = `rotate(${randomTurns}turn)`; 
            
            // üéÉ –ó–∞–ø—É—Å–∫–∞–µ–º –º—É–∑—ã–∫—É
            audio.play().catch(error => {
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ–π –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –±—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
                console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫:", error);
            }); 

            const spinDuration = 1895; 

            setTimeout(() => {
                // 4. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±—ã—Å—Ç—Ä–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ
                magicCloud.classList.remove('rotating');
                
                // üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º—É–∑—ã–∫—É –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –µ–µ –Ω–∞ –Ω–∞—á–∞–ª–æ
                audio.pause();
                audio.currentTime = 0;
                
                // 5. –ë–µ—Ä–µ–º –ü–ï–†–í–û–ï —á–∏—Å–ª–æ –∏–∑ –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞
                const randomNumber = availableNumbers.shift(); 

                // 6. –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                resultCloud.textContent = randomNumber;
                resultCloud.classList.add('show');
                
                // 7. –°–±—Ä–æ—Å –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞
                isSpinning = false;
                setTimeout(() => {
                    magicCloud.style.transform = `rotate(0deg)`; 
                }, 100); 

            }, spinDuration);
        }
    </script>
</body>
</html>